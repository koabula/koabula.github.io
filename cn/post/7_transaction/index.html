<!doctype html>
<html
  dir="ltr"
  lang="cn"
  data-theme=""
  
    class="html theme--light"
  
><head>
  <meta charset="utf-8" />
  <title>
    
      
        ä»é›¶å¼€å§‹å†™ä¸€ä¸ªåŒºå—é“¾(ä¸ƒ äº¤æ˜“) |
      Chang

  </title>

  <meta name="generator" content="Hugo 0.143.1"><meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <meta name="author" content="Chang" />
  <meta
    name="description"
    content="ä¸€åªå­¦å†™ä»£ç çš„ğŸ¨"
  />
  
  
    
    
    <link
      rel="stylesheet"
      href="/scss/main.min.8d4fad7e6916ad2e291e8d97ada157c70350d6d7150fea137e7243340967befb.css"
      integrity="sha256-jU&#43;tfmkWrS4pHo2XraFXxwNQ1tcVD&#43;oTfnJDNAlnvvs="
      crossorigin="anonymous"
      type="text/css"
    />
  

  
  <link
    rel="stylesheet"
    href="/css/markupHighlight.min.73ccfdf28df555e11009c13c20ced067af3cb021504cba43644c705930428b00.css"
    integrity="sha256-c8z98o31VeEQCcE8IM7QZ688sCFQTLpDZExwWTBCiwA="
    crossorigin="anonymous"
    type="text/css"
  />
  
  
  <link
    rel="stylesheet"
    href="/fontawesome/css/fontawesome.min.137b1cf3cea9a8adb7884343a9a5ddddf4280f59153f74dc782fb7f7bf0d0519.css"
    integrity="sha256-E3sc886pqK23iENDqaXd3fQoD1kVP3TceC&#43;3978NBRk="
    crossorigin="anonymous"
    type="text/css"
  />
  
  <link
    rel="stylesheet"
    href="/fontawesome/css/solid.min.e65dc5b48fb5f39b142360c57c3a215744c94e56c755c929cc3e88fe12aab4d3.css"
    integrity="sha256-5l3FtI&#43;185sUI2DFfDohV0TJTlbHVckpzD6I/hKqtNM="
    crossorigin="anonymous"
    type="text/css"
  />
  
  <link
    rel="stylesheet"
    href="/fontawesome/css/regular.min.6f4f16d58da1c82c0c3a3436e021a3d39b4742f741192c546e73e947eacfd92f.css"
    integrity="sha256-b08W1Y2hyCwMOjQ24CGj05tHQvdBGSxUbnPpR&#43;rP2S8="
    crossorigin="anonymous"
    type="text/css"
  />
  
  <link
    rel="stylesheet"
    href="/fontawesome/css/brands.min.e10425ad768bc98ff1fb272a0ac8420f9d1ba22f0612c08ff1010c95080ffe7e.css"
    integrity="sha256-4QQlrXaLyY/x&#43;ycqCshCD50boi8GEsCP8QEMlQgP/n4="
    crossorigin="anonymous"
    type="text/css"
  />
  
  <link rel="shortcut icon" href="/favicons/favicon.ico" type="image/x-icon" />
  <link rel="apple-touch-icon" sizes="180x180" href="/favicons/apple-touch-icon.png" />
  <link rel="icon" type="image/png" sizes="32x32" href="/favicons/favicon-32x32.png" />
  <link rel="icon" type="image/png" sizes="16x16" href="/favicons/favicon-16x16.png" />

  <link rel="canonical" href="https://koabula.github.io/cn/post/7_transaction/" />

  
  
  
  
  <script
    type="text/javascript"
    src="/js/anatole-header.min.f9132794301a01ff16550ed66763482bd848f62243d278f5e550229a158bfd32.js"
    integrity="sha256-&#43;RMnlDAaAf8WVQ7WZ2NIK9hI9iJD0nj15VAimhWL/TI="
    crossorigin="anonymous"
  ></script>

  
    
    
    <script
      type="text/javascript"
      src="/js/anatole-theme-switcher.min.d6d329d93844b162e8bed1e915619625ca91687952177552b9b3e211014a2957.js"
      integrity="sha256-1tMp2ThEsWLovtHpFWGWJcqRaHlSF3VSubPiEQFKKVc="
      crossorigin="anonymous"
    ></script>
  

  

  


  
  
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:image" content="https://koabula.github.io/images/site-feature-image.png">
  <meta name="twitter:title" content="ä»é›¶å¼€å§‹å†™ä¸€ä¸ªåŒºå—é“¾(ä¸ƒ äº¤æ˜“)">
  <meta name="twitter:description" content="Transaction æˆ‘ä»¬ä¸Šä¸€èŠ‚å¯¹æˆ‘ä»¬çš„æ•°å­—è´§å¸çš„å®ç°æ–¹å¼è¿›è¡Œäº†æ¢³ç†ï¼Œè¿™é‡Œæˆ‘ä»¬å¼€å§‹æ„å»ºä¸€ä¸ªUTXOæ¨¡å‹çš„ç”µå­è´§å¸ä½“ç³»ï¼Œå¹¶æŠŠå®ƒåŠ å…¥æˆ‘ä»¬çš„åŒºå—é“¾ç½‘ç»œä¸­ã€‚
ä¸Šä¸€èŠ‚æˆ‘ä»¬è¯´åˆ°ï¼ŒUTXOæ¨¡å‹ä¸­æ‰€æœ‰çš„äº¤æ˜“éƒ½è‡³å°‘æœ‰ä¸€ä¸ªUTXOè¾“å…¥å’Œä¸€ä¸ªUTXOè¾“å‡ºï¼Œå¹¶ä¸”è¾“å…¥å’Œè¾“å‡ºçš„é‡‘é¢åº”è¯¥æ˜¯ä¸€è‡´çš„ã€‚å°±å’Œæˆ‘ä»¬ä½¿ç”¨ç°é‡‘æ¶ˆè´¹ä¸€æ ·ï¼Œä½ æ‹¿å‡ºä¸€å æ€»é‡‘é¢å¤§äºå•†å“ä»·æ ¼çš„ç°é‡‘ç»„åˆç»™è€æ¿ï¼Œè€æ¿å°†é’±æ”¶ä¸‹åè®¡ç®—å¤šä½™çš„é‡‘é¢ç„¶åè¿›è¡Œæ‰¾é›¶ã€‚åŸæ¥ä½ ä»¬ä¸¤ä¸ªä¸€èµ·å…±æœ‰ä¸€ç™¾å—ï¼Œäº¤æ˜“åè¿˜æ˜¯ä¸€ç™¾å—ã€‚é‚£ä¹ˆï¼Œé’±ä¸€å¼€å§‹ä»å“ªé‡Œæ¥å‘¢ï¼Ÿ
åœ¨ç°å®ä¸­ï¼Œæˆ‘ä»¬çš„äººæ°‘å¸æ˜¯ä»å°é’å‚å°åˆ¶å‡ºæ¥ï¼Œç„¶åé€šè¿‡é“¶è¡Œå‘è¡Œåˆ°å…¨å›½ã€‚è€Œåœ¨æˆ‘ä»¬çš„åŒºå—é“¾ä¸­åˆ™å¤§ä¸ç›¸åŒã€‚å›æƒ³æˆ‘ä»¬POWé‚£ä¸€èŠ‚ï¼Œæˆ‘ä»¬è¯´åˆ°å¯¹äºæ‹¿åˆ°è®°è´¦æƒçš„èŠ‚ç‚¹ä¼šå°†åŒºå—çš„ç¬¬ä¸€ç¬”äº¤æ˜“è®¾ç½®ä¸ºä¸€ä¸ªç‰¹æ®Šäº¤æ˜“ï¼Œå‡­ç©ºäº§ç”Ÿä¸€å®šçš„è´§å¸è½¬åˆ°è‡ªå·±çš„åœ°å€ä¸­ã€‚è¿™æ˜¯æ¯”ç‰¹å¸é‡‡ç”¨çš„æ–¹æ³•ï¼Œè¿™ä¸ª&#34;ä¸€å®šçš„è´§å¸&#34;çš„é‡éšæ—¶é—´é€’å‡ï¼Œç§°ä¸ºæ¯”ç‰¹å¸çš„å‡åŠï¼Œæ‰€æœ‰æ¯”ç‰¹å¸çš„æ€»é‡æ˜¯ä¸€å®šçš„ï¼Œä¸º2100ä¸‡æšã€‚è€Œä»¥å¤ªåŠçš„å‘è¡Œé‡æ˜¯åŠ¨æ€çš„ï¼Œæ˜¯ç”±åè®®è§„åˆ™ã€ç¤¾åŒºå…±è¯†ã€EIPææ¡ˆä»¥åŠç½‘ç»œç»æµæ¨¡å‹å…±åŒå†³å®šçš„ã€‚æœºåˆ¶æ¯”è¾ƒå¤æ‚ï¼Œè¿™é‡Œå…ˆæŒ‰ä¸‹ä¸è¡¨ã€‚
äº¤æ˜“å’ŒUTXO ä¸‹é¢æˆ‘ä»¬å¼€å§‹å®ç°Transactionå’ŒUTXOçš„å®ç°
å¯¹äºä¸€ä¸ªUTXOï¼Œæˆ‘ä»¬éœ€è¦è®°å½•çš„æœ‰ï¼š
äº§ç”Ÿè¿™ä¸ªUTXOçš„äº¤æ˜“å“ˆå¸Œå€¼ : æ¯”ç‰¹å¸ç™½çš®ä¹¦ä¸­è¯´&#34;æˆ‘ä»¬å°†ä¸€æšç”µå­è´§å¸å®šä¹‰ä¸ºä¸€æ¡æ•°å­—ç­¾åé“¾&#34;ï¼Œæˆ‘ä»¬ä¾¿æ˜¯é€šè¿‡è¿™ä¸ªç»™UTXOä¸€è·¯è¿‡æ¥ç»å†çš„äº¤æ˜“å°†è¿™äº›ç­¾åä¸²åˆ°ä¸€èµ·ã€‚è€Œæˆ‘ä»¬è®°å½•äº†äº¤æ˜“çš„å“ˆå¸Œå€¼å°±å¯ä»¥æ‰¾åˆ°è¿™ä¸ªäº¤æ˜“ï¼Œè¿™ä¸ªåŸç†åœ¨æœ¬èŠ‚æœ€åå†è¯´ è¿™ä¸ªUTXOåœ¨äº¤æ˜“è¾“å‡ºä¸­çš„ç´¢å¼• : äº¤æ˜“å¯ä»¥æœ‰å¤šä¸ªè¾“å‡ºï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦è®°å½•å®ƒçš„ç´¢å¼•æ‰å¯ä»¥æ‰¾åˆ°å®ƒ UTXOçš„é‡‘é¢ : è¿™ä¸ªä¸ç”¨è§£é‡Šäº† æ¥æ”¶è€…çš„åœ°å€ : ä¹Ÿå°±æ˜¯ç›®å‰è¿™ä¸ªUTXOæ‹¥æœ‰è€…çš„åœ°å€ class UTXO: def __init__(self, tx_hash, output_index, amount, recipient_address): self.tx_hash = tx_hash # äº¤æ˜“çš„å“ˆå¸Œ self.output_index = output_index # è¾“å‡ºåœ¨äº¤æ˜“ä¸­çš„ç´¢å¼• self.amount = amount # é‡‘é¢ self.recipient_address = recipient_address # æ¥æ”¶è€…(æ‹¥æœ‰è€…)çš„åœ°å€ è€Œå¯¹äºä¸€ä¸ªäº¤æ˜“ï¼Œæˆ‘ä»¬éœ€è¦è®°å½•çš„æ˜¯:">



  
  <meta property="og:url" content="https://koabula.github.io/cn/post/7_transaction/">
  <meta property="og:site_name" content="My blog">
  <meta property="og:title" content="ä»é›¶å¼€å§‹å†™ä¸€ä¸ªåŒºå—é“¾(ä¸ƒ äº¤æ˜“)">
  <meta property="og:description" content="Transaction æˆ‘ä»¬ä¸Šä¸€èŠ‚å¯¹æˆ‘ä»¬çš„æ•°å­—è´§å¸çš„å®ç°æ–¹å¼è¿›è¡Œäº†æ¢³ç†ï¼Œè¿™é‡Œæˆ‘ä»¬å¼€å§‹æ„å»ºä¸€ä¸ªUTXOæ¨¡å‹çš„ç”µå­è´§å¸ä½“ç³»ï¼Œå¹¶æŠŠå®ƒåŠ å…¥æˆ‘ä»¬çš„åŒºå—é“¾ç½‘ç»œä¸­ã€‚
ä¸Šä¸€èŠ‚æˆ‘ä»¬è¯´åˆ°ï¼ŒUTXOæ¨¡å‹ä¸­æ‰€æœ‰çš„äº¤æ˜“éƒ½è‡³å°‘æœ‰ä¸€ä¸ªUTXOè¾“å…¥å’Œä¸€ä¸ªUTXOè¾“å‡ºï¼Œå¹¶ä¸”è¾“å…¥å’Œè¾“å‡ºçš„é‡‘é¢åº”è¯¥æ˜¯ä¸€è‡´çš„ã€‚å°±å’Œæˆ‘ä»¬ä½¿ç”¨ç°é‡‘æ¶ˆè´¹ä¸€æ ·ï¼Œä½ æ‹¿å‡ºä¸€å æ€»é‡‘é¢å¤§äºå•†å“ä»·æ ¼çš„ç°é‡‘ç»„åˆç»™è€æ¿ï¼Œè€æ¿å°†é’±æ”¶ä¸‹åè®¡ç®—å¤šä½™çš„é‡‘é¢ç„¶åè¿›è¡Œæ‰¾é›¶ã€‚åŸæ¥ä½ ä»¬ä¸¤ä¸ªä¸€èµ·å…±æœ‰ä¸€ç™¾å—ï¼Œäº¤æ˜“åè¿˜æ˜¯ä¸€ç™¾å—ã€‚é‚£ä¹ˆï¼Œé’±ä¸€å¼€å§‹ä»å“ªé‡Œæ¥å‘¢ï¼Ÿ
åœ¨ç°å®ä¸­ï¼Œæˆ‘ä»¬çš„äººæ°‘å¸æ˜¯ä»å°é’å‚å°åˆ¶å‡ºæ¥ï¼Œç„¶åé€šè¿‡é“¶è¡Œå‘è¡Œåˆ°å…¨å›½ã€‚è€Œåœ¨æˆ‘ä»¬çš„åŒºå—é“¾ä¸­åˆ™å¤§ä¸ç›¸åŒã€‚å›æƒ³æˆ‘ä»¬POWé‚£ä¸€èŠ‚ï¼Œæˆ‘ä»¬è¯´åˆ°å¯¹äºæ‹¿åˆ°è®°è´¦æƒçš„èŠ‚ç‚¹ä¼šå°†åŒºå—çš„ç¬¬ä¸€ç¬”äº¤æ˜“è®¾ç½®ä¸ºä¸€ä¸ªç‰¹æ®Šäº¤æ˜“ï¼Œå‡­ç©ºäº§ç”Ÿä¸€å®šçš„è´§å¸è½¬åˆ°è‡ªå·±çš„åœ°å€ä¸­ã€‚è¿™æ˜¯æ¯”ç‰¹å¸é‡‡ç”¨çš„æ–¹æ³•ï¼Œè¿™ä¸ª&#34;ä¸€å®šçš„è´§å¸&#34;çš„é‡éšæ—¶é—´é€’å‡ï¼Œç§°ä¸ºæ¯”ç‰¹å¸çš„å‡åŠï¼Œæ‰€æœ‰æ¯”ç‰¹å¸çš„æ€»é‡æ˜¯ä¸€å®šçš„ï¼Œä¸º2100ä¸‡æšã€‚è€Œä»¥å¤ªåŠçš„å‘è¡Œé‡æ˜¯åŠ¨æ€çš„ï¼Œæ˜¯ç”±åè®®è§„åˆ™ã€ç¤¾åŒºå…±è¯†ã€EIPææ¡ˆä»¥åŠç½‘ç»œç»æµæ¨¡å‹å…±åŒå†³å®šçš„ã€‚æœºåˆ¶æ¯”è¾ƒå¤æ‚ï¼Œè¿™é‡Œå…ˆæŒ‰ä¸‹ä¸è¡¨ã€‚
äº¤æ˜“å’ŒUTXO ä¸‹é¢æˆ‘ä»¬å¼€å§‹å®ç°Transactionå’ŒUTXOçš„å®ç°
å¯¹äºä¸€ä¸ªUTXOï¼Œæˆ‘ä»¬éœ€è¦è®°å½•çš„æœ‰ï¼š
äº§ç”Ÿè¿™ä¸ªUTXOçš„äº¤æ˜“å“ˆå¸Œå€¼ : æ¯”ç‰¹å¸ç™½çš®ä¹¦ä¸­è¯´&#34;æˆ‘ä»¬å°†ä¸€æšç”µå­è´§å¸å®šä¹‰ä¸ºä¸€æ¡æ•°å­—ç­¾åé“¾&#34;ï¼Œæˆ‘ä»¬ä¾¿æ˜¯é€šè¿‡è¿™ä¸ªç»™UTXOä¸€è·¯è¿‡æ¥ç»å†çš„äº¤æ˜“å°†è¿™äº›ç­¾åä¸²åˆ°ä¸€èµ·ã€‚è€Œæˆ‘ä»¬è®°å½•äº†äº¤æ˜“çš„å“ˆå¸Œå€¼å°±å¯ä»¥æ‰¾åˆ°è¿™ä¸ªäº¤æ˜“ï¼Œè¿™ä¸ªåŸç†åœ¨æœ¬èŠ‚æœ€åå†è¯´ è¿™ä¸ªUTXOåœ¨äº¤æ˜“è¾“å‡ºä¸­çš„ç´¢å¼• : äº¤æ˜“å¯ä»¥æœ‰å¤šä¸ªè¾“å‡ºï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦è®°å½•å®ƒçš„ç´¢å¼•æ‰å¯ä»¥æ‰¾åˆ°å®ƒ UTXOçš„é‡‘é¢ : è¿™ä¸ªä¸ç”¨è§£é‡Šäº† æ¥æ”¶è€…çš„åœ°å€ : ä¹Ÿå°±æ˜¯ç›®å‰è¿™ä¸ªUTXOæ‹¥æœ‰è€…çš„åœ°å€ class UTXO: def __init__(self, tx_hash, output_index, amount, recipient_address): self.tx_hash = tx_hash # äº¤æ˜“çš„å“ˆå¸Œ self.output_index = output_index # è¾“å‡ºåœ¨äº¤æ˜“ä¸­çš„ç´¢å¼• self.amount = amount # é‡‘é¢ self.recipient_address = recipient_address # æ¥æ”¶è€…(æ‹¥æœ‰è€…)çš„åœ°å€ è€Œå¯¹äºä¸€ä¸ªäº¤æ˜“ï¼Œæˆ‘ä»¬éœ€è¦è®°å½•çš„æ˜¯:">
  <meta property="og:locale" content="cn">
  <meta property="og:type" content="article">
    <meta property="article:section" content="post">
    <meta property="article:published_time" content="2024-12-11T00:00:00+00:00">
    <meta property="article:modified_time" content="2024-12-11T00:00:00+00:00">
    <meta property="og:image" content="https://koabula.github.io/images/site-feature-image.png">



  
  
  
  
  <script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "articleSection": "post",
        "name": "ä»é›¶å¼€å§‹å†™ä¸€ä¸ªåŒºå—é“¾(ä¸ƒ äº¤æ˜“)",
        "headline": "ä»é›¶å¼€å§‹å†™ä¸€ä¸ªåŒºå—é“¾(ä¸ƒ äº¤æ˜“)",
        "alternativeHeadline": "",
        "description": "
      
        \u003ch2 id=\u0022transaction\u0022\u003eTransaction\u003c\/h2\u003e\n\u003cp\u003eæˆ‘ä»¬ä¸Šä¸€èŠ‚å¯¹æˆ‘ä»¬çš„æ•°å­—è´§å¸çš„å®ç°æ–¹å¼è¿›è¡Œäº†æ¢³ç†ï¼Œè¿™é‡Œæˆ‘ä»¬å¼€å§‹æ„å»ºä¸€ä¸ªUTXOæ¨¡å‹çš„ç”µå­è´§å¸ä½“ç³»ï¼Œå¹¶æŠŠå®ƒåŠ å…¥æˆ‘ä»¬çš„åŒºå—é“¾ç½‘ç»œä¸­ã€‚\u003c\/p\u003e\n\u003cp\u003eä¸Šä¸€èŠ‚æˆ‘ä»¬è¯´åˆ°ï¼ŒUTXOæ¨¡å‹ä¸­æ‰€æœ‰çš„äº¤æ˜“éƒ½è‡³å°‘æœ‰ä¸€ä¸ªUTXOè¾“å…¥å’Œä¸€ä¸ªUTXOè¾“å‡ºï¼Œå¹¶ä¸”è¾“å…¥å’Œè¾“å‡ºçš„é‡‘é¢åº”è¯¥æ˜¯ä¸€è‡´çš„ã€‚å°±å’Œæˆ‘ä»¬ä½¿ç”¨ç°é‡‘æ¶ˆè´¹ä¸€æ ·ï¼Œä½ æ‹¿å‡ºä¸€å æ€»é‡‘é¢å¤§äºå•†å“ä»·æ ¼çš„ç°é‡‘ç»„åˆç»™è€æ¿ï¼Œè€æ¿å°†é’±æ”¶ä¸‹åè®¡ç®—å¤šä½™çš„é‡‘é¢ç„¶åè¿›è¡Œæ‰¾é›¶ã€‚åŸæ¥ä½ ä»¬ä¸¤ä¸ªä¸€èµ·å…±æœ‰ä¸€ç™¾å—ï¼Œäº¤æ˜“åè¿˜æ˜¯ä¸€ç™¾å—ã€‚é‚£ä¹ˆï¼Œé’±ä¸€å¼€å§‹ä»å“ªé‡Œæ¥å‘¢ï¼Ÿ\u003c\/p\u003e\n\u003cp\u003eåœ¨ç°å®ä¸­ï¼Œæˆ‘ä»¬çš„äººæ°‘å¸æ˜¯ä»å°é’å‚å°åˆ¶å‡ºæ¥ï¼Œç„¶åé€šè¿‡é“¶è¡Œå‘è¡Œåˆ°å…¨å›½ã€‚è€Œåœ¨æˆ‘ä»¬çš„åŒºå—é“¾ä¸­åˆ™å¤§ä¸ç›¸åŒã€‚å›æƒ³æˆ‘ä»¬POWé‚£ä¸€èŠ‚ï¼Œæˆ‘ä»¬è¯´åˆ°å¯¹äºæ‹¿åˆ°è®°è´¦æƒçš„èŠ‚ç‚¹ä¼šå°†åŒºå—çš„ç¬¬ä¸€ç¬”äº¤æ˜“è®¾ç½®ä¸ºä¸€ä¸ªç‰¹æ®Šäº¤æ˜“ï¼Œå‡­ç©ºäº§ç”Ÿä¸€å®šçš„è´§å¸è½¬åˆ°è‡ªå·±çš„åœ°å€ä¸­ã€‚è¿™æ˜¯æ¯”ç‰¹å¸é‡‡ç”¨çš„æ–¹æ³•ï¼Œè¿™ä¸ª\u0026quot;ä¸€å®šçš„è´§å¸\u0026quot;çš„é‡éšæ—¶é—´é€’å‡ï¼Œç§°ä¸ºæ¯”ç‰¹å¸çš„\u003cstrong\u003eå‡åŠ\u003c\/strong\u003eï¼Œæ‰€æœ‰æ¯”ç‰¹å¸çš„æ€»é‡æ˜¯ä¸€å®šçš„ï¼Œä¸º2100ä¸‡æšã€‚è€Œä»¥å¤ªåŠçš„å‘è¡Œé‡æ˜¯åŠ¨æ€çš„ï¼Œæ˜¯ç”±åè®®è§„åˆ™ã€ç¤¾åŒºå…±è¯†ã€EIPææ¡ˆä»¥åŠç½‘ç»œç»æµæ¨¡å‹å…±åŒå†³å®šçš„ã€‚æœºåˆ¶æ¯”è¾ƒå¤æ‚ï¼Œè¿™é‡Œå…ˆæŒ‰ä¸‹ä¸è¡¨ã€‚\u003c\/p\u003e\n\u003chr\u003e\n\u003ch3 id=\u0022äº¤æ˜“å’Œutxo\u0022\u003eäº¤æ˜“å’ŒUTXO\u003c\/h3\u003e\n\u003cp\u003eä¸‹é¢æˆ‘ä»¬å¼€å§‹å®ç°Transactionå’ŒUTXOçš„å®ç°\u003c\/p\u003e\n\u003cp\u003eå¯¹äºä¸€ä¸ªUTXOï¼Œæˆ‘ä»¬éœ€è¦è®°å½•çš„æœ‰ï¼š\u003c\/p\u003e\n\u003cul\u003e\n\u003cli\u003eäº§ç”Ÿè¿™ä¸ªUTXOçš„äº¤æ˜“å“ˆå¸Œå€¼ : æ¯”ç‰¹å¸ç™½çš®ä¹¦ä¸­è¯´\u0026quot;æˆ‘ä»¬å°†ä¸€æšç”µå­è´§å¸å®šä¹‰ä¸ºä¸€æ¡æ•°å­—ç­¾åé“¾\u0026quot;ï¼Œæˆ‘ä»¬ä¾¿æ˜¯é€šè¿‡è¿™ä¸ªç»™UTXOä¸€è·¯è¿‡æ¥ç»å†çš„äº¤æ˜“å°†è¿™äº›ç­¾åä¸²åˆ°ä¸€èµ·ã€‚è€Œæˆ‘ä»¬è®°å½•äº†äº¤æ˜“çš„å“ˆå¸Œå€¼å°±å¯ä»¥æ‰¾åˆ°è¿™ä¸ªäº¤æ˜“ï¼Œè¿™ä¸ªåŸç†åœ¨æœ¬èŠ‚æœ€åå†è¯´\u003c\/li\u003e\n\u003cli\u003eè¿™ä¸ªUTXOåœ¨äº¤æ˜“è¾“å‡ºä¸­çš„ç´¢å¼• : äº¤æ˜“å¯ä»¥æœ‰å¤šä¸ªè¾“å‡ºï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦è®°å½•å®ƒçš„ç´¢å¼•æ‰å¯ä»¥æ‰¾åˆ°å®ƒ\u003c\/li\u003e\n\u003cli\u003eUTXOçš„é‡‘é¢ : è¿™ä¸ªä¸ç”¨è§£é‡Šäº†\u003c\/li\u003e\n\u003cli\u003eæ¥æ”¶è€…çš„åœ°å€ : ä¹Ÿå°±æ˜¯ç›®å‰è¿™ä¸ªUTXOæ‹¥æœ‰è€…çš„åœ°å€\u003c\/li\u003e\n\u003c\/ul\u003e\n\u003cdiv class=\u0022highlight\u0022\u003e\u003cpre tabindex=\u00220\u0022 class=\u0022chroma\u0022\u003e\u003ccode class=\u0022language-py\u0022 data-lang=\u0022py\u0022\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan class=\u0022cl\u0022\u003e\u003cspan class=\u0022k\u0022\u003eclass\u003c\/span\u003e \u003cspan class=\u0022nc\u0022\u003eUTXO\u003c\/span\u003e\u003cspan class=\u0022p\u0022\u003e:\u003c\/span\u003e\n\u003c\/span\u003e\u003c\/span\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan class=\u0022cl\u0022\u003e    \u003cspan class=\u0022k\u0022\u003edef\u003c\/span\u003e \u003cspan class=\u0022fm\u0022\u003e__init__\u003c\/span\u003e\u003cspan class=\u0022p\u0022\u003e(\u003c\/span\u003e\u003cspan class=\u0022bp\u0022\u003eself\u003c\/span\u003e\u003cspan class=\u0022p\u0022\u003e,\u003c\/span\u003e \u003cspan class=\u0022n\u0022\u003etx_hash\u003c\/span\u003e\u003cspan class=\u0022p\u0022\u003e,\u003c\/span\u003e \u003cspan class=\u0022n\u0022\u003eoutput_index\u003c\/span\u003e\u003cspan class=\u0022p\u0022\u003e,\u003c\/span\u003e \u003cspan class=\u0022n\u0022\u003eamount\u003c\/span\u003e\u003cspan class=\u0022p\u0022\u003e,\u003c\/span\u003e \u003cspan class=\u0022n\u0022\u003erecipient_address\u003c\/span\u003e\u003cspan class=\u0022p\u0022\u003e):\u003c\/span\u003e\n\u003c\/span\u003e\u003c\/span\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan class=\u0022cl\u0022\u003e        \u003cspan class=\u0022bp\u0022\u003eself\u003c\/span\u003e\u003cspan class=\u0022o\u0022\u003e.\u003c\/span\u003e\u003cspan class=\u0022n\u0022\u003etx_hash\u003c\/span\u003e \u003cspan class=\u0022o\u0022\u003e=\u003c\/span\u003e \u003cspan class=\u0022n\u0022\u003etx_hash\u003c\/span\u003e  \u003cspan class=\u0022c1\u0022\u003e# äº¤æ˜“çš„å“ˆå¸Œ\u003c\/span\u003e\n\u003c\/span\u003e\u003c\/span\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan class=\u0022cl\u0022\u003e        \u003cspan class=\u0022bp\u0022\u003eself\u003c\/span\u003e\u003cspan class=\u0022o\u0022\u003e.\u003c\/span\u003e\u003cspan class=\u0022n\u0022\u003eoutput_index\u003c\/span\u003e \u003cspan class=\u0022o\u0022\u003e=\u003c\/span\u003e \u003cspan class=\u0022n\u0022\u003eoutput_index\u003c\/span\u003e  \u003cspan class=\u0022c1\u0022\u003e# è¾“å‡ºåœ¨äº¤æ˜“ä¸­çš„ç´¢å¼•\u003c\/span\u003e\n\u003c\/span\u003e\u003c\/span\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan class=\u0022cl\u0022\u003e        \u003cspan class=\u0022bp\u0022\u003eself\u003c\/span\u003e\u003cspan class=\u0022o\u0022\u003e.\u003c\/span\u003e\u003cspan class=\u0022n\u0022\u003eamount\u003c\/span\u003e \u003cspan class=\u0022o\u0022\u003e=\u003c\/span\u003e \u003cspan class=\u0022n\u0022\u003eamount\u003c\/span\u003e  \u003cspan class=\u0022c1\u0022\u003e# é‡‘é¢\u003c\/span\u003e\n\u003c\/span\u003e\u003c\/span\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan class=\u0022cl\u0022\u003e        \u003cspan class=\u0022bp\u0022\u003eself\u003c\/span\u003e\u003cspan class=\u0022o\u0022\u003e.\u003c\/span\u003e\u003cspan class=\u0022n\u0022\u003erecipient_address\u003c\/span\u003e \u003cspan class=\u0022o\u0022\u003e=\u003c\/span\u003e \u003cspan class=\u0022n\u0022\u003erecipient_address\u003c\/span\u003e  \u003cspan class=\u0022c1\u0022\u003e# æ¥æ”¶è€…(æ‹¥æœ‰è€…)çš„åœ°å€\u003c\/span\u003e\n\u003c\/span\u003e\u003c\/span\u003e\u003c\/code\u003e\u003c\/pre\u003e\u003c\/div\u003e\u003cp\u003eè€Œå¯¹äºä¸€ä¸ªäº¤æ˜“ï¼Œæˆ‘ä»¬éœ€è¦è®°å½•çš„æ˜¯:\u003c\/p\u003e


      


    ",
        "inLanguage": "cn",
        "isFamilyFriendly": "true",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https:\/\/koabula.github.io\/cn\/post\/7_transaction\/"
        },
        "author" : {
            "@type": "Person",
            "name": "Chang"
        },
        "creator" : {
            "@type": "Person",
            "name": "Chang"
        },
        "accountablePerson" : {
            "@type": "Person",
            "name": "Chang"
        },
        "copyrightHolder" : {
            "@type": "Person",
            "name": "Chang"
        },
        "copyrightYear" : "2024",
        "dateCreated": "2024-12-11T00:00:00.00Z",
        "datePublished": "2024-12-11T00:00:00.00Z",
        "dateModified": "2024-12-11T00:00:00.00Z",
        "publisher":{
            "@type":"Organization",
            "name": "Chang",
            "url": "https://koabula.github.io/",
            "logo": {
                "@type": "ImageObject",
                "url": "https:\/\/koabula.github.io\/favicons\/favicon-32x32.png",
                "width":"32",
                "height":"32"
            }
        },
        "image": 
      [
        
        "https://koabula.github.io/images/site-feature-image.png"


      
      ]

    ,
        "url" : "https:\/\/koabula.github.io\/cn\/post\/7_transaction\/",
        "wordCount" : "761",
        "genre" : [ 
      
      "blockchain"

    
      
        ,

      
      "web3"

    ],
        "keywords" : [ ]
    }
  </script>


</head>
<body class="body">
    <div class="wrapper">
      <aside
        
          class="wrapper__sidebar"
        
      ><div
  class="sidebar
    animated fadeInDown
  "
>
  <div class="sidebar__content">
    <div class="sidebar__introduction">
      <img
        class="sidebar__introduction-profileimage"
        src="/images/profile.jpg"
        alt="profile picture"
      />
      
        <div class="sidebar__introduction-title">
          <a href="/cn">Chang</a>
        </div>
      
      <div class="sidebar__introduction-description">
        <p>ä¸€åªå­¦å†™ä»£ç çš„ğŸ¨</p>
      </div>
    </div>
    <ul class="sidebar__list">
      
        <li class="sidebar__list-item">
          <a
            href="https://www.zhihu.com/people/jiang-nan-san-ren-59"
            target="_blank"
            rel="noopener me"
            aria-label="Linkedin"
            title="Linkedin"
          >
            <i class="fa-brands fa-zhihu fa-2x" aria-hidden="true"></i>
          </a>
        </li>
      
        <li class="sidebar__list-item">
          <a
            href="https://github.com/koabula"
            target="_blank"
            rel="noopener me"
            aria-label="GitHub"
            title="GitHub"
          >
            <i class="fa-brands fa-github fa-2x" aria-hidden="true"></i>
          </a>
        </li>
      
        <li class="sidebar__list-item">
          <a
            href="mailto:koabula@126.com"
            target="_blank"
            rel="noopener me"
            aria-label="e-mail"
            title="e-mail"
          >
            <i class="fa-solid fa-envelope fa-2x" aria-hidden="true"></i>
          </a>
        </li>
      
    </ul>
  </div><footer class="footer footer__sidebar">
  <ul class="footer__list">
    <li class="footer__item">
      &copy;
      
        Chang
        2025
      
    </li>
    
      <li class="footer__item">
        <a
          class="link"
          href="/imprint/"
          
          title=""
        >
          imprint
        </a>
      </li>
    
  </ul>
</footer>
  
  <script
    type="text/javascript"
    src="/js/medium-zoom.min.1248fa75275e5ef0cbef27e8c1e27dc507c445ae3a2c7d2ed0be0809555dac64.js"
    integrity="sha256-Ekj6dSdeXvDL7yfoweJ9xQfERa46LH0u0L4ICVVdrGQ="
    crossorigin="anonymous"
  ></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.0/dist/katex.min.css" integrity="sha384-t5CR&#43;zwDAROtph0PXGte6ia8heboACF9R5l/DiY&#43;WZ3P2lxNgvJkQk5n7GPvLMYw" crossorigin="anonymous" /><script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.0/dist/katex.min.js" integrity="sha384-FaFLTlohFghEIZkw6VGwmf9ISTubWAVYW8tG8&#43;w2LAIftJEULZABrF9PPFv&#43;tVkH" crossorigin="anonymous"></script><script
      defer
      src="https://cdn.jsdelivr.net/npm/katex@0.13.0/dist/contrib/auto-render.min.js"
      integrity="sha384-bHBqxz8fokvgoJ/sc17HODNxa42TlaEhB&#43;w8ZJXTc2nZf1VgEaFZeZvT4Mznfz0v"
      crossorigin="anonymous"
      onload="renderMathInElement(document.body);"
    ></script>
      <script async src="https://www.googletagmanager.com/gtag/js?id=G-6W03JJK5LC"></script>
      <script>
        var doNotTrack = false;
        if ( false ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-6W03JJK5LC');
        }
      </script></div>
</aside>
      <main
        
          class="wrapper__main"
        
      >
        <header class="header"><div
  class="
    animated fadeInDown
  "
>
  <a role="button" class="navbar-burger" data-target="navMenu" aria-label="menu" aria-expanded="false">
    <span aria-hidden="true" class="navbar-burger__line"></span>
    <span aria-hidden="true" class="navbar-burger__line"></span>
    <span aria-hidden="true" class="navbar-burger__line"></span>
  </a>
  <nav class="nav">
    <ul class="nav__list" id="navMenu">
      
      
        
        
          <li class="nav__list-item">
            
            <a
              
              href="/"
              
              title=""
              >Home</a
            >
          </li>
        

      
        
        
          <li class="nav__list-item">
            
            <a
              
              href="/post/"
              
              title=""
              >æ–‡ç« </a
            >
          </li>
        

      
        
        
          <li class="nav__list-item">
            
            <a
              
              href="/portfolio/"
              
              title=""
              >é¡¹ç›®</a
            >
          </li>
        

      
        
        
          <li class="nav__list-item">
            
            <a
              
              href="/about/"
              
              title=""
              >å…³äº</a
            >
          </li>
        

      
        
        
          <li class="nav__list-item">
            
            <a
              
              href="/contact/"
              
              title=""
              >è”ç³»</a
            >
          </li>
        

      
    </ul>
    <ul class="nav__list nav__list--end">
      
        <li class="nav__list-item">
          <div class="optionswitch">
            <input class="optionswitch__picker" type="checkbox" id="languagepicker" hidden />
            <label class="optionswitch__label" for="languagepicker"
              >CN <i class="fa fa-angle-down" aria-hidden="true"></i
            ></label>
            <div class="optionswitch__triangle"></div>
            <ul class="optionswitch__list">
              
                <li class="optionswitch__list-item">
                  <a href="/post/7_transaction/" title="EN"
                    ><span
                      
                      aria-label="EN"
                      >EN</span
                    >
                  </a>
                </li>
              
            </ul>
          </div>
        </li>
      
      
        <li class="nav__list-item">
          <div class="themeswitch">
            <a title="Switch Theme">
              <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
            </a>
          </div>
        </li>
      
    </ul>
  </nav>
</div>
</header>
  <div
    class="post 
      animated fadeInDown
    "
  >
    
    <div class="post__content">
      
        <h1>ä»é›¶å¼€å§‹å†™ä¸€ä¸ªåŒºå—é“¾(ä¸ƒ äº¤æ˜“)</h1>
      
      
        <ul class="post__meta">
          <li class="post__meta-item">
            <em class="fas fa-calendar-day post__meta-icon"></em>
            <span class="post__meta-text"
              >
                
                  11/12/2024
                

              
            </span>
          </li>
          <li class="post__meta-item">
            <em class="fas fa-stopwatch post__meta-icon"></em>
            <span class="post__meta-text">4-minute read</span>
          </li>
        </ul>
      <h2 id="transaction">Transaction</h2>
<p>æˆ‘ä»¬ä¸Šä¸€èŠ‚å¯¹æˆ‘ä»¬çš„æ•°å­—è´§å¸çš„å®ç°æ–¹å¼è¿›è¡Œäº†æ¢³ç†ï¼Œè¿™é‡Œæˆ‘ä»¬å¼€å§‹æ„å»ºä¸€ä¸ªUTXOæ¨¡å‹çš„ç”µå­è´§å¸ä½“ç³»ï¼Œå¹¶æŠŠå®ƒåŠ å…¥æˆ‘ä»¬çš„åŒºå—é“¾ç½‘ç»œä¸­ã€‚</p>
<p>ä¸Šä¸€èŠ‚æˆ‘ä»¬è¯´åˆ°ï¼ŒUTXOæ¨¡å‹ä¸­æ‰€æœ‰çš„äº¤æ˜“éƒ½è‡³å°‘æœ‰ä¸€ä¸ªUTXOè¾“å…¥å’Œä¸€ä¸ªUTXOè¾“å‡ºï¼Œå¹¶ä¸”è¾“å…¥å’Œè¾“å‡ºçš„é‡‘é¢åº”è¯¥æ˜¯ä¸€è‡´çš„ã€‚å°±å’Œæˆ‘ä»¬ä½¿ç”¨ç°é‡‘æ¶ˆè´¹ä¸€æ ·ï¼Œä½ æ‹¿å‡ºä¸€å æ€»é‡‘é¢å¤§äºå•†å“ä»·æ ¼çš„ç°é‡‘ç»„åˆç»™è€æ¿ï¼Œè€æ¿å°†é’±æ”¶ä¸‹åè®¡ç®—å¤šä½™çš„é‡‘é¢ç„¶åè¿›è¡Œæ‰¾é›¶ã€‚åŸæ¥ä½ ä»¬ä¸¤ä¸ªä¸€èµ·å…±æœ‰ä¸€ç™¾å—ï¼Œäº¤æ˜“åè¿˜æ˜¯ä¸€ç™¾å—ã€‚é‚£ä¹ˆï¼Œé’±ä¸€å¼€å§‹ä»å“ªé‡Œæ¥å‘¢ï¼Ÿ</p>
<p>åœ¨ç°å®ä¸­ï¼Œæˆ‘ä»¬çš„äººæ°‘å¸æ˜¯ä»å°é’å‚å°åˆ¶å‡ºæ¥ï¼Œç„¶åé€šè¿‡é“¶è¡Œå‘è¡Œåˆ°å…¨å›½ã€‚è€Œåœ¨æˆ‘ä»¬çš„åŒºå—é“¾ä¸­åˆ™å¤§ä¸ç›¸åŒã€‚å›æƒ³æˆ‘ä»¬POWé‚£ä¸€èŠ‚ï¼Œæˆ‘ä»¬è¯´åˆ°å¯¹äºæ‹¿åˆ°è®°è´¦æƒçš„èŠ‚ç‚¹ä¼šå°†åŒºå—çš„ç¬¬ä¸€ç¬”äº¤æ˜“è®¾ç½®ä¸ºä¸€ä¸ªç‰¹æ®Šäº¤æ˜“ï¼Œå‡­ç©ºäº§ç”Ÿä¸€å®šçš„è´§å¸è½¬åˆ°è‡ªå·±çš„åœ°å€ä¸­ã€‚è¿™æ˜¯æ¯”ç‰¹å¸é‡‡ç”¨çš„æ–¹æ³•ï¼Œè¿™ä¸ª&quot;ä¸€å®šçš„è´§å¸&quot;çš„é‡éšæ—¶é—´é€’å‡ï¼Œç§°ä¸ºæ¯”ç‰¹å¸çš„<strong>å‡åŠ</strong>ï¼Œæ‰€æœ‰æ¯”ç‰¹å¸çš„æ€»é‡æ˜¯ä¸€å®šçš„ï¼Œä¸º2100ä¸‡æšã€‚è€Œä»¥å¤ªåŠçš„å‘è¡Œé‡æ˜¯åŠ¨æ€çš„ï¼Œæ˜¯ç”±åè®®è§„åˆ™ã€ç¤¾åŒºå…±è¯†ã€EIPææ¡ˆä»¥åŠç½‘ç»œç»æµæ¨¡å‹å…±åŒå†³å®šçš„ã€‚æœºåˆ¶æ¯”è¾ƒå¤æ‚ï¼Œè¿™é‡Œå…ˆæŒ‰ä¸‹ä¸è¡¨ã€‚</p>
<hr>
<h3 id="äº¤æ˜“å’Œutxo">äº¤æ˜“å’ŒUTXO</h3>
<p>ä¸‹é¢æˆ‘ä»¬å¼€å§‹å®ç°Transactionå’ŒUTXOçš„å®ç°</p>
<p>å¯¹äºä¸€ä¸ªUTXOï¼Œæˆ‘ä»¬éœ€è¦è®°å½•çš„æœ‰ï¼š</p>
<ul>
<li>äº§ç”Ÿè¿™ä¸ªUTXOçš„äº¤æ˜“å“ˆå¸Œå€¼ : æ¯”ç‰¹å¸ç™½çš®ä¹¦ä¸­è¯´&quot;æˆ‘ä»¬å°†ä¸€æšç”µå­è´§å¸å®šä¹‰ä¸ºä¸€æ¡æ•°å­—ç­¾åé“¾&quot;ï¼Œæˆ‘ä»¬ä¾¿æ˜¯é€šè¿‡è¿™ä¸ªç»™UTXOä¸€è·¯è¿‡æ¥ç»å†çš„äº¤æ˜“å°†è¿™äº›ç­¾åä¸²åˆ°ä¸€èµ·ã€‚è€Œæˆ‘ä»¬è®°å½•äº†äº¤æ˜“çš„å“ˆå¸Œå€¼å°±å¯ä»¥æ‰¾åˆ°è¿™ä¸ªäº¤æ˜“ï¼Œè¿™ä¸ªåŸç†åœ¨æœ¬èŠ‚æœ€åå†è¯´</li>
<li>è¿™ä¸ªUTXOåœ¨äº¤æ˜“è¾“å‡ºä¸­çš„ç´¢å¼• : äº¤æ˜“å¯ä»¥æœ‰å¤šä¸ªè¾“å‡ºï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦è®°å½•å®ƒçš„ç´¢å¼•æ‰å¯ä»¥æ‰¾åˆ°å®ƒ</li>
<li>UTXOçš„é‡‘é¢ : è¿™ä¸ªä¸ç”¨è§£é‡Šäº†</li>
<li>æ¥æ”¶è€…çš„åœ°å€ : ä¹Ÿå°±æ˜¯ç›®å‰è¿™ä¸ªUTXOæ‹¥æœ‰è€…çš„åœ°å€</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">UTXO</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tx_hash</span><span class="p">,</span> <span class="n">output_index</span><span class="p">,</span> <span class="n">amount</span><span class="p">,</span> <span class="n">recipient_address</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="bp">self</span><span class="o">.</span><span class="n">tx_hash</span> <span class="o">=</span> <span class="n">tx_hash</span>  <span class="c1"># äº¤æ˜“çš„å“ˆå¸Œ</span>
</span></span><span class="line"><span class="cl">        <span class="bp">self</span><span class="o">.</span><span class="n">output_index</span> <span class="o">=</span> <span class="n">output_index</span>  <span class="c1"># è¾“å‡ºåœ¨äº¤æ˜“ä¸­çš„ç´¢å¼•</span>
</span></span><span class="line"><span class="cl">        <span class="bp">self</span><span class="o">.</span><span class="n">amount</span> <span class="o">=</span> <span class="n">amount</span>  <span class="c1"># é‡‘é¢</span>
</span></span><span class="line"><span class="cl">        <span class="bp">self</span><span class="o">.</span><span class="n">recipient_address</span> <span class="o">=</span> <span class="n">recipient_address</span>  <span class="c1"># æ¥æ”¶è€…(æ‹¥æœ‰è€…)çš„åœ°å€</span>
</span></span></code></pre></div><p>è€Œå¯¹äºä¸€ä¸ªäº¤æ˜“ï¼Œæˆ‘ä»¬éœ€è¦è®°å½•çš„æ˜¯:</p>
<ul>
<li>äº¤æ˜“çš„è¾“å…¥ä¸è¾“å‡º : ä¸¤ä¸ªåˆ—è¡¨ï¼Œå‚¨å­˜è¾“å…¥å’Œè¾“å‡ºçš„UTXO</li>
<li>äº¤æ˜“çš„å“ˆå¸Œ : è¿™ä¸ªäº¤æ˜“çš„å“ˆå¸Œå€¼ï¼Œç”¨æ¥å”¯ä¸€è¯†åˆ«è¿™ä¸ªäº¤æ˜“</li>
<li>äº¤æ˜“ç­¾å : äº¤æ˜“å‘èµ·è€…(ä»˜é’±çš„)å¯¹è¿™ä¸ªäº¤æ˜“å“ˆå¸Œçš„ç­¾å</li>
<li>å‘é€è€…çš„å…¬é’¥ : ç”¨äºéªŒè¯è¿™ä¸ªç­¾å</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Transaction</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="bp">self</span><span class="o">.</span><span class="n">inputs</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># äº¤æ˜“è¾“å…¥</span>
</span></span><span class="line"><span class="cl">        <span class="bp">self</span><span class="o">.</span><span class="n">outputs</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># äº¤æ˜“è¾“å‡º</span>
</span></span><span class="line"><span class="cl">        <span class="bp">self</span><span class="o">.</span><span class="n">tx_hash</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># äº¤æ˜“å“ˆå¸Œ</span>
</span></span><span class="line"><span class="cl">        <span class="bp">self</span><span class="o">.</span><span class="n">signature</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># äº¤æ˜“ç­¾å</span>
</span></span><span class="line"><span class="cl">        <span class="bp">self</span><span class="o">.</span><span class="n">sender_public_key</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># å‘é€è€…çš„å…¬é’¥</span>
</span></span></code></pre></div><p>å…·ä½“çš„ä¸€äº›å‡½æ•°å®ç°å°±ä¸æ”¾åœ¨è¿™é‡Œäº†ï¼Œå¯ä»¥åœ¨githubä»“åº“æ‰¾åˆ°</p>
<h3 id="ä½¿æˆ‘ä»¬çš„walletç±»å¯ä»¥é€‚é…äº¤æ˜“">ä½¿æˆ‘ä»¬çš„Walletç±»å¯ä»¥é€‚é…äº¤æ˜“</h3>
<p>æˆ‘ä»¬ä¸»è¦éœ€è¦æ·»åŠ ä¸¤ä¸ªæ–¹æ³•:åˆ›å»ºä¸€ä¸ªäº¤æ˜“(ä»˜é’±)ï¼Œæ¥æ”¶åˆ°ä¸€ä¸ªäº¤æ˜“åæ›´æ–°ä½™é¢(æ”¶é’±)</p>
<p>è¦æ³¨æ„:æ”¶é’±ä¸éœ€è¦æ”¶æ¬¾æ–¹çš„æ“ä½œï¼Œå½“ä»˜æ¬¾äººæäº¤äº¤æ˜“åˆ°é“¾ä¸Šè¾¾åˆ°å…±è¯†åï¼Œè¿™ç¬”é’±å·²ç»åœ¨ä½ çš„åœ°å€ä¸Šäº†ã€‚æˆ‘ä»¬è¿™é‡Œæ˜¯è¦å®ç°åœ¨é’±åŒ…è¿™è¾¹æ›´æ–°ä¸€ä¸‹æ˜¾ç¤ºçš„ä½™é¢ï¼Œè€Œä¸æ˜¯å®ç°æ”¶æ¬¾ã€‚</p>
<p>æˆ‘ä»¬çš„<code>create_transaction</code>æ–¹æ³•é¦–å…ˆé€‰æ‹©è¶³å¤Ÿçš„UTXOæ·»åŠ è¿›äº¤æ˜“ï¼Œå¦‚æœé’±ä¸å¤Ÿå°±æŠ¥é”™é€€å‡º(æ²¡é’±å°±æ˜¯æ²¡é’±ï¼Œå†æ€ä¹ˆç®—éƒ½ä»˜ä¸äº†é’±)ã€‚ç„¶ååœ¨äº¤æ˜“ä¸­æ·»åŠ éœ€è¦è½¬è´¦çš„éƒ¨åˆ†ï¼Œä¹‹åè®¡ç®—æ‰¾é›¶ï¼Œæ·»åŠ åˆ°è¾“å‡ºä¸­ã€‚æœ€åè®¡ç®—å“ˆå¸Œå€¼å¹¶ç­¾åï¼Œæ›´æ–°è‡ªå·±çš„utxoæ± </p>
<p>è€Œ<code>receive_transaction</code>æ–¹æ³•ä¾¿æ˜¯å…ˆéªŒè¯ä¸€æ¬¡äº¤æ˜“çš„ç­¾åï¼Œç„¶åéå†æ‰€æœ‰çš„è¾“å‡ºï¼Œå°†è¾“å‡ºåˆ°è‡ªå·±åœ°å€ä¸‹çš„UTXOè®°å½•ä¸‹æ¥ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Wallet</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="bp">self</span><span class="o">.</span><span class="n">private_key</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randbytes</span><span class="p">(</span><span class="mi">32</span><span class="p">)</span>  <span class="c1"># 256ä½ç§é’¥</span>
</span></span><span class="line"><span class="cl">        <span class="bp">self</span><span class="o">.</span><span class="n">public_key</span> <span class="o">=</span> <span class="n">generate_public_key</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">private_key</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="bp">self</span><span class="o">.</span><span class="n">address</span> <span class="o">=</span> <span class="n">generate_btc_address</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">public_key</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="bp">self</span><span class="o">.</span><span class="n">utxo_pool</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># é’±åŒ…ä¸­çš„UTXOé›†åˆ</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># ...çœç•¥å…¶ä»–ä»£ç  (i_i)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">create_transaction</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">recipient_address</span><span class="p">,</span> <span class="n">amount</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># 1. é€‰æ‹©è¶³å¤Ÿçš„UTXO</span>
</span></span><span class="line"><span class="cl">        <span class="n">selected_utxos</span> <span class="o">=</span> <span class="p">[]</span>
</span></span><span class="line"><span class="cl">        <span class="n">total_amount</span> <span class="o">=</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="n">utxo</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">utxo_pool</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="n">selected_utxos</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">utxo</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="n">total_amount</span> <span class="o">+=</span> <span class="n">utxo</span><span class="o">.</span><span class="n">amount</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="n">total_amount</span> <span class="o">&gt;=</span> <span class="n">amount</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                <span class="k">break</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="n">total_amount</span> <span class="o">&lt;</span> <span class="n">amount</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&#34;Don&#39;t have enough coins&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1"># 2. åˆ›å»ºäº¤æ˜“</span>
</span></span><span class="line"><span class="cl">        <span class="n">tx</span> <span class="o">=</span> <span class="n">Transaction</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="n">utxo</span> <span class="ow">in</span> <span class="n">selected_utxos</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="n">tx</span><span class="o">.</span><span class="n">add_input</span><span class="p">(</span><span class="n">utxo</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1"># 3. åˆ›å»ºäº¤æ˜“è¾“å‡º</span>
</span></span><span class="line"><span class="cl">        <span class="n">tx</span><span class="o">.</span><span class="n">add_output</span><span class="p">(</span><span class="n">amount</span><span class="p">,</span> <span class="n">recipient_address</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1"># 4. æ‰¾é›¶</span>
</span></span><span class="line"><span class="cl">        <span class="n">change</span> <span class="o">=</span> <span class="n">total_amount</span> <span class="o">-</span> <span class="n">amount</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="n">change</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="n">tx</span><span class="o">.</span><span class="n">add_output</span><span class="p">(</span><span class="n">change</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">address</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1"># 5. è®¡ç®—äº¤æ˜“å“ˆå¸Œ</span>
</span></span><span class="line"><span class="cl">        <span class="n">tx</span><span class="o">.</span><span class="n">calculate_hash</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1"># 6. ç­¾åäº¤æ˜“</span>
</span></span><span class="line"><span class="cl">        <span class="n">tx</span><span class="o">.</span><span class="n">sign</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">private_key</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1"># 7. æ›´æ–°UTXOæ± </span>
</span></span><span class="line"><span class="cl">        <span class="bp">self</span><span class="o">.</span><span class="n">utxo_pool</span> <span class="o">=</span> <span class="p">[</span><span class="n">utxo</span> <span class="k">for</span> <span class="n">utxo</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">utxo_pool</span> <span class="k">if</span> <span class="n">utxo</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">selected_utxos</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">tx</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">receive_transaction</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">transaction</span><span class="p">:</span> <span class="n">Transaction</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># 1. éªŒè¯äº¤æ˜“ç­¾å</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="ow">not</span> <span class="n">transaction</span><span class="o">.</span><span class="n">verify_signature</span><span class="p">():</span>
</span></span><span class="line"><span class="cl">            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&#34;Invalid transaction signature&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1"># 2. æ›´æ–°UTXOæ± </span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="n">output</span> <span class="ow">in</span> <span class="n">transaction</span><span class="o">.</span><span class="n">outputs</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="n">output</span><span class="o">.</span><span class="n">recipient_address</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">address</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                <span class="n">new_utxo</span> <span class="o">=</span> <span class="n">UTXO</span><span class="p">(</span><span class="n">transaction</span><span class="o">.</span><span class="n">tx_hash</span><span class="p">,</span> <span class="n">transaction</span><span class="o">.</span><span class="n">outputs</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">output</span><span class="p">),</span> <span class="n">output</span><span class="o">.</span><span class="n">amount</span><span class="p">,</span> <span class="n">output</span><span class="o">.</span><span class="n">recipient_address</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                <span class="bp">self</span><span class="o">.</span><span class="n">utxo_pool</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">new_utxo</span><span class="p">)</span>
</span></span></code></pre></div><h3 id="ä¿®æ”¹æˆ‘ä»¬çš„èŠ‚ç‚¹">ä¿®æ”¹æˆ‘ä»¬çš„èŠ‚ç‚¹</h3>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬è¦ä¿®æ”¹æˆ‘ä»¬çš„èŠ‚ç‚¹ç±»ã€‚æˆ‘ä»¬ç°åœ¨å¯ä»¥é€šè¿‡walletç±»æ¥åˆ›å»ºäº¤æ˜“ä»¥åŠæ¥æ”¶äº¤æ˜“ä¿®æ”¹è‡ªå·±çš„ä½™é¢æ˜¾ç¤ºï¼Œä½†æ˜¯äº¤æ˜“çš„è¿›è¡Œéœ€è¦åœ¨èŠ‚ç‚¹æ‰“åŒ…åŒºå—æ—¶å®ç°ã€‚èŠ‚ç‚¹åœ¨p2pç½‘ç»œä¸­æ”¶é›†å„ä¸ªç”¨æˆ·å‘å‡ºçš„äº¤æ˜“ï¼Œç„¶åå¯¹äº¤æ˜“åœ¨æœ¬åœ°è¿›è¡Œæ£€æŸ¥åˆæ³•æ€§ï¼Œå¯¹åˆæ³•çš„äº¤æ˜“è¿›è¡Œæ‰“åŒ…ã€‚ç„¶åè¿›è¡ŒæŒ–çŸ¿ï¼Œå°±æ˜¯æˆ‘ä»¬å‰é¢powä¸€èŠ‚æè¿‡çš„å†…å®¹äº†ã€‚è¦æ³¨æ„çš„æ˜¯ï¼Œæˆ‘ä»¬é’±åŒ…ä¸­æ£€æŸ¥äº¤æ˜“åªéªŒè¯äº†äº¤æ˜“çš„ç­¾åï¼Œä½†æ˜¯æˆ‘ä»¬èŠ‚ç‚¹ä¸­ä¸ä»…è¦æ£€æŸ¥ç­¾åï¼Œè¿˜éœ€è¦æ£€æŸ¥è¿™ä¸ªæ“ä½œæ˜¯å¦åˆæ³•ï¼Œäº¤æ˜“èŠ±çš„UTXOæ˜¯å¦å­˜åœ¨ï¼Œæœ‰æ²¡æœ‰å‡ºç°åŒèŠ±çš„æƒ…å†µç­‰ç­‰ã€‚</p>
<p>æˆ‘ä»¬è¿˜éœ€è¦ä¿®æ”¹æŒ–çŸ¿æ–¹æ³•ï¼Œæ¯ä¸ªåŒºå—çš„ç¬¬ä¸€ç¬”äº¤æ˜“åº”è¯¥æ˜¯ä¸€ä¸ªæ²¡æœ‰è¾“å…¥åªæœ‰ä¸€ä¸ªè¾“å‡ºç»™èŠ‚ç‚¹è‡ªå·±é’±åŒ…åœ°å€çš„äº¤æ˜“ä½œä¸ºæŒ–çŸ¿å¥–åŠ±ï¼Œè¿™é‡Œæˆ‘ä»¬å°†å¥–åŠ±è®¾ç½®ä¸º50ã€‚ç®€å•èµ·è§ï¼Œæˆ‘ä»¬ä¹Ÿä¸å®ç°æ¯”ç‰¹å¸çš„å‡åŠæ“ä½œï¼Œä»¥åŠäº¤æ˜“gasè´¹äº†ã€‚</p>
<p>æˆ‘ä»¬é¦–å…ˆä¿®æ”¹Nodeçš„å˜é‡ï¼Œæ·»åŠ äº†äº¤æ˜“æ± å’ŒUTXOæ± ï¼Œå‰è€…å‚¨å­˜æ”¶é›†åˆ°éœ€è¦æ‰“åŒ…çš„äº¤æ˜“ï¼Œåè€…å‚¨å­˜æ•´ä¸ªåŒºå—é“¾ä¸­çš„UTXOã€‚æ³¨æ„åˆ°utxoæ± ä½¿ç”¨çš„æ˜¯ä¸€ä¸ªå“ˆå¸Œè¡¨(å­—å…¸)ç»“æ„ï¼Œå®ƒçš„keyæ˜¯äº¤æ˜“å“ˆå¸Œä»¥åŠUTXOåœ¨äº¤æ˜“è¾“å‡ºä¸­çš„ç´¢å¼•ã€‚æˆ‘ä»¬æåˆ°å¯ä»¥ä½¿ç”¨tx_hashå”¯ä¸€ç¡®å®šäº¤æ˜“ï¼Œè€Œè¾“å‡ºç´¢å¼•ä¹Ÿæ˜¯ç‹¬ä¸€æ— äºŒçš„ï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨è¿™ä¸ªä½œä¸ºkeyæ¥å®šä½UTXOã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Node</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ip</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># ...çœç•¥å’Œè¿™é‡Œæ— å…³çš„ä»£ç </span>
</span></span><span class="line"><span class="cl">        <span class="bp">self</span><span class="o">.</span><span class="n">wallet</span> <span class="o">=</span> <span class="n">Wallet</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">        <span class="bp">self</span><span class="o">.</span><span class="n">mempool</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># äº¤æ˜“æ± </span>
</span></span><span class="line"><span class="cl">        <span class="bp">self</span><span class="o">.</span><span class="n">mempool_lock</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Lock</span><span class="p">()</span>  <span class="c1"># äº¤æ˜“æ± çš„é”</span>
</span></span><span class="line"><span class="cl">        <span class="bp">self</span><span class="o">.</span><span class="n">global_utxo_pool</span> <span class="o">=</span> <span class="p">{}</span>  <span class="c1"># å…¨å±€UTXOæ± ï¼Œæ ¼å¼: {tx_hash:output_index: UTXO}</span>
</span></span><span class="line"><span class="cl">        <span class="bp">self</span><span class="o">.</span><span class="n">utxo_pool_lock</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Lock</span><span class="p">()</span>  <span class="c1"># å…¨å±€UTXOæ± çš„é”</span>
</span></span></code></pre></div><p>æ¥ç€ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ£€éªŒè¿™ä¸ªåŒºå—ä¸­æ‰€æœ‰äº¤æ˜“çš„å‡½æ•°ï¼Œè¿™é‡Œå¹¶ä¸å®ç°äº¤æ˜“è€Œæ˜¯å•çº¯çš„æ£€éªŒã€‚å¦‚æœæ˜¯ç¬¬ä¸€ç¬”äº¤æ˜“ï¼Œæ£€æŸ¥é‡‘é¢æ˜¯å¦ä¸ºçº¦å®šçš„50åä¾¿é€šè¿‡ã€‚
å¯¹äºå…¶ä»–äº¤æ˜“ï¼Œé¦–å…ˆéªŒè¯ç­¾åï¼Œç„¶åéªŒè¯è¾“å…¥çš„UTXOæ˜¯å¦å­˜åœ¨åˆæ³•ï¼Œæœ€åéªŒè¯é‡‘é¢æ˜¯å¦æ­£ç¡®ã€‚æœ€åå‡½æ•°è¿”å›è¿™äº›äº¤æ˜“æ˜¯å¦åˆæ³•ï¼Œä»¥åŠä¸åˆæ³•çš„äº¤æ˜“åˆ—è¡¨ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">verify_block_transactions</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">block</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;&#34;&#34;éªŒè¯åŒºå—ä¸­çš„æ‰€æœ‰äº¤æ˜“ï¼Œè¿”å›(æ˜¯å¦å…¨éƒ¨æœ‰æ•ˆ, æ— æ•ˆäº¤æ˜“åˆ—è¡¨)&#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="n">transactions</span> <span class="o">=</span> <span class="p">[]</span>
</span></span><span class="line"><span class="cl">        <span class="n">invalid_transactions</span> <span class="o">=</span> <span class="p">[]</span>
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="n">leaf</span> <span class="ow">in</span> <span class="n">block</span><span class="o">.</span><span class="n">merkle_tree</span><span class="o">.</span><span class="n">leaves</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="k">try</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                <span class="n">tx</span> <span class="o">=</span> <span class="n">Transaction</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">leaf</span><span class="o">.</span><span class="n">data</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">                <span class="n">transactions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tx</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="k">except</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                <span class="k">continue</span>  <span class="c1"># è·³è¿‡éäº¤æ˜“æ•°æ®</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1"># ä¸´æ—¶å­˜å‚¨å·²ä½¿ç”¨çš„UTXO</span>
</span></span><span class="line"><span class="cl">        <span class="n">used_utxos</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">utxo_pool_lock</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="k">for</span> <span class="n">tx</span> <span class="ow">in</span> <span class="n">transactions</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                <span class="c1"># å¦‚æœæ˜¯æŒ–çŸ¿å¥–åŠ±äº¤æ˜“ï¼ˆç¬¬ä¸€ä¸ªäº¤æ˜“ï¼‰ï¼Œç›´æ¥éªŒè¯é€šè¿‡</span>
</span></span><span class="line"><span class="cl">                <span class="k">if</span> <span class="n">transactions</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">tx</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                    <span class="k">if</span> <span class="n">tx</span><span class="o">.</span><span class="n">outputs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">amount</span> <span class="o">!=</span> <span class="mi">50</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;Invalid mining reward transaction: </span><span class="si">{</span><span class="n">tx</span><span class="o">.</span><span class="n">tx_hash</span><span class="si">}</span><span class="s2">&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                        <span class="n">invalid_transactions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tx</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                    <span class="k">continue</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                <span class="k">try</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                    <span class="c1"># 1. éªŒè¯äº¤æ˜“ç­¾å</span>
</span></span><span class="line"><span class="cl">                    <span class="k">if</span> <span class="ow">not</span> <span class="n">tx</span><span class="o">.</span><span class="n">verify_signature</span><span class="p">():</span>
</span></span><span class="line"><span class="cl">                        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;Invalid transaction signature: </span><span class="si">{</span><span class="n">tx</span><span class="o">.</span><span class="n">tx_hash</span><span class="si">}</span><span class="s2">&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                        <span class="n">invalid_transactions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tx</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                        <span class="k">continue</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                    <span class="c1"># 2. éªŒè¯è¾“å…¥UTXO</span>
</span></span><span class="line"><span class="cl">                    <span class="n">total_input</span> <span class="o">=</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">                    <span class="n">valid_inputs</span> <span class="o">=</span> <span class="kc">True</span>
</span></span><span class="line"><span class="cl">                    
</span></span><span class="line"><span class="cl">                    <span class="k">for</span> <span class="n">utxo</span> <span class="ow">in</span> <span class="n">tx</span><span class="o">.</span><span class="n">inputs</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                        <span class="c1"># æ£€æŸ¥UTXOæ˜¯å¦å·²è¢«ä½¿ç”¨ï¼ˆé˜²æ­¢åŒé‡æ”¯ä»˜ï¼‰</span>
</span></span><span class="line"><span class="cl">                        <span class="n">utxo_key</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&#34;</span><span class="si">{</span><span class="n">utxo</span><span class="o">.</span><span class="n">tx_hash</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">utxo</span><span class="o">.</span><span class="n">output_index</span><span class="si">}</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">                        <span class="k">if</span> <span class="n">utxo_key</span> <span class="ow">in</span> <span class="n">used_utxos</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;Double spending detected: </span><span class="si">{</span><span class="n">utxo_key</span><span class="si">}</span><span class="s2">&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                            <span class="n">valid_inputs</span> <span class="o">=</span> <span class="kc">False</span>
</span></span><span class="line"><span class="cl">                            <span class="k">break</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                        <span class="c1"># åœ¨å…¨å±€UTXOæ± ä¸­æŸ¥æ‰¾è¿™ä¸ªUTXO</span>
</span></span><span class="line"><span class="cl">                        <span class="k">if</span> <span class="n">utxo_key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">global_utxo_pool</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                            <span class="n">total_input</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">global_utxo_pool</span><span class="p">[</span><span class="n">utxo_key</span><span class="p">]</span><span class="o">.</span><span class="n">amount</span>
</span></span><span class="line"><span class="cl">                            <span class="n">used_utxos</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">utxo_key</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                        <span class="k">else</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;UTXO not found in global pool: </span><span class="si">{</span><span class="n">utxo_key</span><span class="si">}</span><span class="s2">&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                            <span class="n">valid_inputs</span> <span class="o">=</span> <span class="kc">False</span>
</span></span><span class="line"><span class="cl">                            <span class="k">break</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                    <span class="k">if</span> <span class="ow">not</span> <span class="n">valid_inputs</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                        <span class="n">invalid_transactions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tx</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                        <span class="k">continue</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                    <span class="c1"># 3. éªŒè¯è¾“å…¥è¾“å‡ºé‡‘é¢</span>
</span></span><span class="line"><span class="cl">                    <span class="n">total_output</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">output</span><span class="o">.</span><span class="n">amount</span> <span class="k">for</span> <span class="n">output</span> <span class="ow">in</span> <span class="n">tx</span><span class="o">.</span><span class="n">outputs</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                    <span class="k">if</span> <span class="n">total_input</span> <span class="o">!=</span> <span class="n">total_output</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;Input/output amount mismatch: </span><span class="si">{</span><span class="n">tx</span><span class="o">.</span><span class="n">tx_hash</span><span class="si">}</span><span class="s2">&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                        <span class="n">invalid_transactions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tx</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                        <span class="k">continue</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;Error verifying transaction </span><span class="si">{</span><span class="n">tx</span><span class="o">.</span><span class="n">tx_hash</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                    <span class="n">invalid_transactions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tx</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                    <span class="k">continue</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="n">invalid_transactions</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">,</span> <span class="n">invalid_transactions</span>
</span></span></code></pre></div><p>ç»§ç»­æˆ‘ä»¬å®ç°äº†ä¸€ä¸ªæ‰§è¡Œäº¤æ˜“çš„å‡½æ•°ï¼Œå®ƒä¼šä¿®æ”¹æœ¬åœ°çš„UTXOæ± ç­‰çŠ¶æ€å˜é‡</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">process_block_transactions</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">block</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;&#34;&#34;å¤„ç†åŒºå—ä¸­çš„æ‰€æœ‰äº¤æ˜“ï¼Œæ›´æ–°UTXOæ± &#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="n">transactions</span> <span class="o">=</span> <span class="p">[]</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="n">leaf</span> <span class="ow">in</span> <span class="n">block</span><span class="o">.</span><span class="n">merkle_tree</span><span class="o">.</span><span class="n">leaves</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="k">try</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                <span class="c1"># è§£æJSONå­—ç¬¦ä¸²</span>
</span></span><span class="line"><span class="cl">                <span class="n">tx_data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">leaf</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                <span class="n">tx</span> <span class="o">=</span> <span class="n">Transaction</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="n">tx_data</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                <span class="n">transactions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tx</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                <span class="k">continue</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">utxo_pool_lock</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="k">for</span> <span class="n">tx</span> <span class="ow">in</span> <span class="n">transactions</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                <span class="c1"># å¦‚æœæ˜¯æŒ–çŸ¿å¥–åŠ±äº¤æ˜“ï¼ˆç¬¬ä¸€ä¸ªäº¤æ˜“ï¼‰ï¼Œç›´æ¥æ·»åŠ è¾“å‡ºåˆ°UTXOæ± </span>
</span></span><span class="line"><span class="cl">                <span class="k">if</span> <span class="n">transactions</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">tx</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">output</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">tx</span><span class="o">.</span><span class="n">outputs</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">                        <span class="n">utxo_key</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&#34;</span><span class="si">{</span><span class="n">tx</span><span class="o">.</span><span class="n">tx_hash</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">                        <span class="bp">self</span><span class="o">.</span><span class="n">global_utxo_pool</span><span class="p">[</span><span class="n">utxo_key</span><span class="p">]</span> <span class="o">=</span> <span class="n">output</span>
</span></span><span class="line"><span class="cl">                        <span class="k">if</span> <span class="n">output</span><span class="o">.</span><span class="n">recipient_address</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">wallet</span><span class="o">.</span><span class="n">address</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                            <span class="bp">self</span><span class="o">.</span><span class="n">wallet</span><span class="o">.</span><span class="n">add_utxo</span><span class="p">(</span><span class="n">output</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                    <span class="k">continue</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                <span class="c1"># å¯¹äºæ™®é€šäº¤æ˜“ï¼Œç›´æ¥æ›´æ–°UTXOæ± </span>
</span></span><span class="line"><span class="cl">                <span class="c1"># 1. ç§»é™¤å·²ä½¿ç”¨çš„UTXO</span>
</span></span><span class="line"><span class="cl">                <span class="k">for</span> <span class="n">utxo</span> <span class="ow">in</span> <span class="n">tx</span><span class="o">.</span><span class="n">inputs</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                    <span class="n">utxo_key</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&#34;</span><span class="si">{</span><span class="n">utxo</span><span class="o">.</span><span class="n">tx_hash</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">utxo</span><span class="o">.</span><span class="n">output_index</span><span class="si">}</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">                    <span class="bp">self</span><span class="o">.</span><span class="n">global_utxo_pool</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">utxo_key</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                <span class="c1"># 2. æ·»åŠ æ–°çš„UTXO</span>
</span></span><span class="line"><span class="cl">                <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">output</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">tx</span><span class="o">.</span><span class="n">outputs</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">                    <span class="n">utxo_key</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&#34;</span><span class="si">{</span><span class="n">tx</span><span class="o">.</span><span class="n">tx_hash</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">                    <span class="bp">self</span><span class="o">.</span><span class="n">global_utxo_pool</span><span class="p">[</span><span class="n">utxo_key</span><span class="p">]</span> <span class="o">=</span> <span class="n">output</span>
</span></span><span class="line"><span class="cl">                    <span class="c1"># å¦‚æœæ˜¯å‘ç»™è‡ªå·±çš„ï¼Œä¹Ÿæ·»åŠ åˆ°é’±åŒ…çš„UTXOæ± </span>
</span></span><span class="line"><span class="cl">                    <span class="k">if</span> <span class="n">output</span><span class="o">.</span><span class="n">recipient_address</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">wallet</span><span class="o">.</span><span class="n">address</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                        <span class="bp">self</span><span class="o">.</span><span class="n">wallet</span><span class="o">.</span><span class="n">add_utxo</span><span class="p">(</span><span class="n">output</span><span class="p">)</span>
</span></span></code></pre></div><p>ç„¶åæˆ‘ä»¬ä¿®æ”¹æŒ–çŸ¿çº¿ç¨‹ï¼ŒåŸç†å’Œä¹‹å‰POWä¸­è°ˆåˆ°çš„ä¸€æ ·ï¼Œä½†æ˜¯å°†ç¬¬ä¸€ä¸ªæ•°æ®ä¿®æ”¹ä¸ºäº†æŒ–çŸ¿æ¿€åŠ±äº¤æ˜“ã€‚åœ¨è¿›è¡Œæ‰“åŒ…å‰ï¼Œæˆ‘ä»¬å…ˆå¯¹äº¤æ˜“æ± ä¸­çš„æ‰€æœ‰äº¤æ˜“è¿›è¡Œæ£€æŸ¥ï¼Œåˆ å»éæ³•çš„äº¤æ˜“åå†ä½¿ç”¨åˆæ³•çš„äº¤æ˜“æ„å»ºMerkleæ ‘ï¼Œç»§ç»­è¿›è¡ŒæŒ–çŸ¿æ“ä½œã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">mine_thread</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_lock</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                <span class="c1"># åˆ›å»ºæŒ–çŸ¿å¥–åŠ±äº¤æ˜“</span>
</span></span><span class="line"><span class="cl">                <span class="n">mining_reward</span> <span class="o">=</span> <span class="n">Transaction</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">                <span class="n">reward_output</span> <span class="o">=</span> <span class="n">UTXO</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">                    <span class="n">tx_hash</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                    <span class="n">output_index</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                    <span class="n">amount</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                    <span class="n">recipient_address</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">wallet</span><span class="o">.</span><span class="n">address</span>
</span></span><span class="line"><span class="cl">                <span class="p">)</span>
</span></span><span class="line"><span class="cl">                <span class="n">mining_reward</span><span class="o">.</span><span class="n">outputs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">reward_output</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                <span class="n">mining_reward</span><span class="o">.</span><span class="n">tx_hash</span> <span class="o">=</span> <span class="n">mining_reward</span><span class="o">.</span><span class="n">calculate_hash</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">                
</span></span><span class="line"><span class="cl">                <span class="c1"># ä»äº¤æ˜“æ± ä¸­é€‰æ‹©äº¤æ˜“</span>
</span></span><span class="line"><span class="cl">                <span class="n">selected_transactions</span> <span class="o">=</span> <span class="p">[]</span>
</span></span><span class="line"><span class="cl">                <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">mempool_lock</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                    <span class="n">selected_transactions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mempool</span>
</span></span><span class="line"><span class="cl">                
</span></span><span class="line"><span class="cl">                <span class="c1"># å°†æŒ–çŸ¿å¥–åŠ±äº¤æ˜“æ”¾åœ¨ç¬¬ä¸€ä½</span>
</span></span><span class="line"><span class="cl">                <span class="n">all_transactions</span> <span class="o">=</span> <span class="p">[</span><span class="n">mining_reward</span><span class="p">]</span> <span class="o">+</span> <span class="n">selected_transactions</span>
</span></span><span class="line"><span class="cl">                    
</span></span><span class="line"><span class="cl">                <span class="c1"># åˆ›å»ºmerkleæ ‘ï¼ˆæ³¨æ„è¿™é‡Œéœ€è¦å…ˆå°†äº¤æ˜“è½¬æ¢ä¸ºJSONå­—ç¬¦ä¸²ï¼‰</span>
</span></span><span class="line"><span class="cl">                <span class="n">merkle_tree</span> <span class="o">=</span> <span class="n">MerkleTree</span><span class="p">([</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">tx</span><span class="o">.</span><span class="n">to_json</span><span class="p">())</span> <span class="k">for</span> <span class="n">tx</span> <span class="ow">in</span> <span class="n">all_transactions</span><span class="p">])</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="c1"># åˆ›å»ºåŒºå—å¹¶éªŒè¯äº¤æ˜“</span>
</span></span><span class="line"><span class="cl">            <span class="n">block</span> <span class="o">=</span> <span class="n">Block</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">blockchain</span><span class="o">.</span><span class="n">height</span><span class="p">,</span> <span class="n">merkle_tree</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">                         <span class="bp">self</span><span class="o">.</span><span class="n">blockchain</span><span class="o">.</span><span class="n">get_latest_block</span><span class="p">()</span><span class="o">.</span><span class="n">hash</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">                         <span class="mi">0</span><span class="p">,</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">address</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            
</span></span><span class="line"><span class="cl">            <span class="c1"># éªŒè¯äº¤æ˜“å¹¶è·å–æ— æ•ˆäº¤æ˜“åˆ—è¡¨</span>
</span></span><span class="line"><span class="cl">            <span class="n">is_valid</span><span class="p">,</span> <span class="n">invalid_txs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">verify_block_transactions</span><span class="p">(</span><span class="n">block</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            
</span></span><span class="line"><span class="cl">            <span class="c1"># å¦‚æœæœ‰æ— æ•ˆäº¤æ˜“ï¼Œä»äº¤æ˜“æ± å’Œé€‰ä¸­çš„äº¤æ˜“ä¸­ç§»é™¤å®ƒä»¬</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="n">invalid_txs</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">mempool_lock</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                    <span class="bp">self</span><span class="o">.</span><span class="n">mempool</span> <span class="o">=</span> <span class="p">[</span><span class="n">tx</span> <span class="k">for</span> <span class="n">tx</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">mempool</span> <span class="k">if</span> <span class="n">tx</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">invalid_txs</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">                    <span class="n">selected_transactions</span> <span class="o">=</span> <span class="p">[</span><span class="n">tx</span> <span class="k">for</span> <span class="n">tx</span> <span class="ow">in</span> <span class="n">selected_transactions</span> <span class="k">if</span> <span class="n">tx</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">invalid_txs</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">                
</span></span><span class="line"><span class="cl">                <span class="c1"># é‡æ–°åˆ›å»ºmerkleæ ‘ï¼ˆåŒ…å«å¥–åŠ±äº¤æ˜“å’Œæœ‰æ•ˆäº¤æ˜“ï¼‰</span>
</span></span><span class="line"><span class="cl">                <span class="n">all_transactions</span> <span class="o">=</span> <span class="p">[</span><span class="n">mining_reward</span><span class="p">]</span> <span class="o">+</span> <span class="n">selected_transactions</span>
</span></span><span class="line"><span class="cl">                <span class="n">merkle_tree</span> <span class="o">=</span> <span class="n">MerkleTree</span><span class="p">([</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">tx</span><span class="o">.</span><span class="n">to_json</span><span class="p">())</span> <span class="k">for</span> <span class="n">tx</span> <span class="ow">in</span> <span class="n">all_transactions</span><span class="p">])</span>
</span></span><span class="line"><span class="cl">                <span class="n">block</span> <span class="o">=</span> <span class="n">Block</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">blockchain</span><span class="o">.</span><span class="n">height</span><span class="p">,</span> <span class="n">merkle_tree</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">                            <span class="bp">self</span><span class="o">.</span><span class="n">blockchain</span><span class="o">.</span><span class="n">get_latest_block</span><span class="p">()</span><span class="o">.</span><span class="n">hash</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">                            <span class="mi">0</span><span class="p">,</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">address</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="c1"># å°è¯•æŒ–çŸ¿</span>
</span></span><span class="line"><span class="cl">            <span class="n">nonce</span> <span class="o">=</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">            <span class="k">while</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">getBlock</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                <span class="n">block</span><span class="o">.</span><span class="n">nonce</span> <span class="o">=</span> <span class="n">nonce</span>
</span></span><span class="line"><span class="cl">                <span class="n">block</span><span class="o">.</span><span class="n">hash</span> <span class="o">=</span> <span class="n">block</span><span class="o">.</span><span class="n">calculate_hash</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">blockchain</span><span class="o">.</span><span class="n">is_block_valid</span><span class="p">(</span><span class="n">block</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">                    <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">blockchain_lock</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                        <span class="bp">self</span><span class="o">.</span><span class="n">send_block</span><span class="p">(</span><span class="n">block</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                        <span class="bp">self</span><span class="o">.</span><span class="n">blockchain</span><span class="o">.</span><span class="n">append_block</span><span class="p">(</span><span class="n">block</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                        <span class="c1"># å¤„ç†æ–°åŒºå—ä¸­çš„äº¤æ˜“</span>
</span></span><span class="line"><span class="cl">                        <span class="bp">self</span><span class="o">.</span><span class="n">process_block_transactions</span><span class="p">(</span><span class="n">block</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                        <span class="c1"># ä»äº¤æ˜“æ± ä¸­ç§»é™¤å·²ç¡®è®¤çš„äº¤æ˜“</span>
</span></span><span class="line"><span class="cl">                        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">mempool_lock</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                            <span class="bp">self</span><span class="o">.</span><span class="n">mempool</span> <span class="o">=</span> <span class="p">[</span><span class="n">tx</span> <span class="k">for</span> <span class="n">tx</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">mempool</span> 
</span></span><span class="line"><span class="cl">                                          <span class="k">if</span> <span class="n">tx</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">selected_transactions</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">                    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;Mined block </span><span class="si">{</span><span class="n">block</span><span class="o">.</span><span class="n">index</span><span class="si">}</span><span class="s2"> :</span><span class="si">{</span><span class="n">block</span><span class="o">.</span><span class="n">hash</span><span class="si">}</span><span class="s2">&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                    <span class="k">break</span>
</span></span><span class="line"><span class="cl">                <span class="n">nonce</span> <span class="o">+=</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">signal_lock</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                <span class="bp">self</span><span class="o">.</span><span class="n">getBlock</span> <span class="o">=</span> <span class="kc">False</span>
</span></span></code></pre></div><p>è¿™é‡Œä¾¿å°†äº¤æ˜“åŠŸèƒ½åŠ å…¥æˆ‘ä»¬çš„åŒºå—é“¾äº†ï¼Œæˆ‘ä»¬ä¼šåœ¨åé¢ä½¿ç”¨è¿™ä¸ªåŒºå—é“¾è¿›è¡Œæµ‹è¯•ã€‚éœ€è¦ä¸€æçš„æ˜¯ï¼Œæˆ‘ä»¬åœ¨æ¥æ”¶å…¶ä»–èŠ‚ç‚¹ä¼ æ¥çš„åŒºå—é“¾æ—¶ï¼Œä¹Ÿéœ€è¦æ£€æŸ¥åŒºå—é“¾ä¸­æ‰€æœ‰äº¤æ˜“æ˜¯å¦åˆæ³•ï¼Œå¦‚æœå­˜åœ¨éæ³•äº¤æ˜“åˆ™æ‹’ç»æ¥æ”¶è¿™ä¸ªåŒºå—é“¾ï¼Œè€Œå¦‚æœè¯¥åŒºå—é“¾åˆæ³•ï¼Œåˆ™éœ€è¦éå†ä¸€éåŒºå—é“¾å»ºç«‹UTXOæ± ã€‚</p>
<hr>
<h3 id="å»ºç«‹ä¸€ä¸ªå›¾å½¢åŒ–ç•Œé¢">å»ºç«‹ä¸€ä¸ªå›¾å½¢åŒ–ç•Œé¢</h3>
<p>æˆ‘ä»¬æ¥ä¸‹æ¥ä½¿ç”¨tkinterå»ºç«‹ä¸€ä¸ªç®€å•çš„å›¾å½¢åŒ–ç•Œé¢(è¿™ä¸ªåº“pythonè‡ªå¸¦ï¼Œä¸éœ€è¦pip)ï¼Œç•Œé¢å¦‚ä¸‹</p>
<p><img src="../../images/gui.png" alt="alt text"></p>
<p>åœ¨åˆå§‹åŒ–ç»‘å®šipåœ°å€ä¹‹å(å®é™…ä¸­åº”è¯¥æ˜¯ç»‘å®šè‡ªå·±ä¸»æœºçš„å…¬ç½‘ipï¼Œä½†æ˜¯è¿™é‡Œåœ¨æœ¬åœ°æ¼”ç¤ºæˆ‘ä»¬ä½¿ç”¨æœ¬åœ°çš„å›ç¯åœ°å€)ï¼Œç¨‹åºå¼€å§‹è¿è¡ŒèŠ‚ç‚¹ï¼Œå¹¶è·Ÿè¸ªæ˜¾ç¤ºä½™é¢ã€‚å¯ä»¥é€šè¿‡è¾“å…¥æ¥æ”¶è€…çš„é’±åŒ…åœ°å€å’Œè½¬è´¦é‡‘é¢å®ç°è½¬è´¦ã€‚</p>
<p>å¦‚æœä½ åœ¨æœ¬åœ°è¿è¡Œå‡ ä¸ªèŠ‚ç‚¹ï¼Œä½ å¯èƒ½ä¼šå‘ç°æŸä¸ªé’±åŒ…ä¸€å¼€å§‹æŒ–åˆ°äº†ä¸€ä¸ªåŒºå—è·å¾—äº†50ä¸ªcoinçš„å¥–åŠ±ï¼Œä½†æ˜¯è¿‡äº†ä¸€ä¼šè¿™50ä¸ªcoinçš„å¥–åŠ±ä¸è§äº†ã€‚è¿™ä¾¿æ˜¯åŒºå—é“¾<strong>åˆ†å‰</strong>ä¹‹ååˆé‡æ–°å½¢æˆäº†å…±è¯†ã€‚æˆ‘ä»¬çš„åŒºå—é“¾ç½‘ç»œä¸­ï¼Œæ¯ä¸ªå…¨èŠ‚ç‚¹éƒ½åœ¨åŠªåŠ›åœ°æŒ–çŸ¿ï¼Œå¦‚æœæŒ–åˆ°ä¸€ä¸ªåŒºå—å°±æ·»åŠ åˆ°æœ¬åœ°çš„åŒºå—é“¾åå¹¿æ’­ç»™å…¶ä»–èŠ‚ç‚¹ã€‚ä½†æ˜¯ç”±äºç½‘ç»œå»¶è¿Ÿ(æˆ–è€…æ•…æ„ä¸ºä¹‹)ï¼Œè¿™ä¸ªç½‘ç»œä¸­å¯èƒ½ç»´æŠ¤äº†ä¸¤æ¡åŒºå—é“¾ã€‚åœ¨æˆ‘ä»¬è¿™ä¸ªä¾‹å­ä¸­ï¼Œè¿™ä¸ªèŠ‚ç‚¹å°±æ˜¯ç»´æŠ¤äº†ä¸€ä¸ªå’Œå…¶ä»–ä¸€éƒ¨åˆ†èŠ‚ç‚¹ä¸åŒçš„åŒºå—é“¾ï¼Œåœ¨è¿›è¡Œé€šä¿¡åå‘ç°æœ¬åœ°çš„åŒºå—é“¾é•¿åº¦æ¯”å¦å¤–ä¸€æ¡é“¾æ›´çŸ­ï¼Œäºæ˜¯æ›´æ–°æ¥æ”¶è¿™æ¡é•¿é“¾ï¼Œé‡æ–°è¾¾åˆ°å…±è¯†ï¼Œè¿™å¥–åŠ±çš„50coinä¹Ÿå°±æ¶ˆå¤±äº†ã€‚</p>
<p>ä»£ç æ²¡ä»€ä¹ˆå®åœ¨çš„ä¸œè¥¿ï¼Œå¯ä»¥åˆ°githubä»“åº“è·å–ã€‚</p>
<hr>
<p>è¿™é‡Œå›å¤´æ¥å¡«å‰é¢çš„å‘</p>
<p><strong>ä¸ºä»€ä¹ˆæˆ‘ä»¬è®°å½•äº†äº¤æ˜“çš„ç´¢å¼•å°±å¯ä»¥æ‰¾åˆ°äº¤æ˜“?</strong>
åœ¨å›ç­”è¿™ä¸ªé—®é¢˜ä¹‹å‰ï¼Œæˆ‘å†é—®ä¸€ä¸ªé—®é¢˜<strong>æˆ‘ä»¬çš„åŒºå—é“¾æ˜¯å¦‚ä½•å‚¨å­˜çš„?</strong>
åŒºå—é“¾æ—¢ç„¶æ˜¯ä¸ªé“¾ï¼Œé‚£ä¹ˆå¾ˆå¤šäººå¯èƒ½å°±ä¼šè§‰å¾—åº”è¯¥é¡ºåºå‚¨å­˜å°±è¡Œäº†ï¼Œæˆ‘ä»¬å‰é¢çš„å®ç°ä¹Ÿå…¨éƒ¨æ˜¯åœ¨å†…å­˜ä¸­ä½¿ç”¨ä¸€ä¸ªåˆ—è¡¨è®°å½•ï¼Œæ²¡æœ‰å‚¨å­˜åˆ°ç£ç›˜ä¸­ã€‚ä½†æ˜¯å®é™…ä¸Šæ¯”ç‰¹å¸çš„å‚¨å­˜ä½¿ç”¨çš„leveldbæ˜¯ä¸€ä¸ªkey-valueçš„æ•°æ®åº“(ä½ å¯ä»¥ç†è§£ä¸ºä¸€ä¸ªå“ˆå¸Œè¡¨æˆ–è€…å­—å…¸)ï¼Œæ¯ä¸ªåŒºå—çš„keyæ˜¯è¯¥åŒºå—çš„å“ˆå¸Œå€¼ã€‚ä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬è·å–ä¸€ä¸ªåŒºå—çš„å“ˆå¸Œå€¼å°±å¯ä»¥æ‰¾åˆ°è¿™ä¸ªåŒºå—çš„æ•°æ®ï¼Œé€šè¿‡ä»æœ€æ–°çš„åŒºå—å‡ºå‘ï¼Œè®¿é—®å®ƒçš„previous_hashä½ç½®å°±å¯ä»¥è·å–ä¸Šä¸€ä¸ªåŒºå—ï¼Œè¿™æ ·ä¸€ç›´å‘åæŸ¥æ‰¾å°±å¯ä»¥å®ç°åŒºå—é“¾çš„éå†ã€‚è€Œæˆ‘ä»¬çš„äº¤æ˜“ä¹Ÿå­˜åœ¨å“ˆå¸Œå€¼ï¼Œæ‰€ä»¥äº¤æ˜“çš„å‚¨å­˜ä¹Ÿä½¿ç”¨äº†åŒæ ·çš„æ–¹å¼ã€‚</p>
<p>å¦‚æœä½ çŸ¥é“å“ˆå¸Œè¡¨ï¼Œé‚£ä½ å¯èƒ½ä¼šé—®ï¼šè¿™æ ·ä¸ä¼šå‘ç”Ÿå“ˆå¸Œç¢°æ’å—ï¼Ÿä½ æˆ–è®¸å¬è¿‡: &ldquo;ä¸€ä¸ªå±‹å­é‡Œåªè¦è¶…è¿‡23ä¸ªäººï¼Œé‚£ä¹ˆå°±æœ‰50%çš„å¯èƒ½æ€§æœ‰ä¸¤ä¸ªäººåŒä¸€å¤©å‡ºç”Ÿ&rdquo; ï¼Œè¿™ä¸ªæ•°å­¦ç»“è®º(ç”Ÿæ—¥æ”»å‡»)åœ¨è¿™é‡Œå°±ä¸é€‚ç”¨äº†å—ï¼Ÿ</p>
<p>è¿™å°±è¦è°ˆåˆ°SHA256çš„æŠ—ç¢°æ’æ€§äº†ï¼Œä¸‹é¢æˆ‘ä»¬ç®€å•ç®—ç¬”è´¦:</p>
<p>é¦–å…ˆæˆ‘ä»¬çœ‹ä¸€ä¸‹ç”Ÿæ—¥æ”»å‡»ï¼Œå¦‚æœå–å€¼èŒƒå›´ä¸ºNï¼Œéœ€è¦å–kä¸ªå€¼ï¼Œé‚£ä¹ˆæ²¡æœ‰ç¢°æ’çš„æ¦‚ç‡ä¸º $ P_{æ²¡æœ‰ç¢°æ’}=\frac{N(N-1)&hellip;(N-k+1)}{N^k} $ é‚£ä¹ˆå‘ç”Ÿç¢°æ’çš„æ¦‚ç‡å°±æ˜¯</p>
<p>$ P_{ç¢°æ’} = 1-\frac{N(N-1)&hellip;(N-k+1)}{N^k} = 1- \Pi_{i=0}^{k-1}(1-\frac{i}{N})$</p>
<p>å½“xè¾ƒå°æ—¶$ ln(1-x) \approx -x $</p>
<p>è®¡ç®—$ ln(\Pi_{i=0}^{k-1}(1-\frac{i}{N})) =  \sum_{i=0}^{k-1}ln(1-\frac{i}{N}) \approx - \frac{\sum_{i=0}^{k-1} i}{N} = -\frac{k(k-1)}{2N}$</p>
<p>æ‰€ä»¥å»æ‰å¯¹æ•°æ”¾å›æ¦‚ç‡ä¸­ï¼Œ$P_{ç¢°æ’}=1-e^{-\frac{k(k-1)}{2N}}$</p>
<p>æˆ‘ä»¬çš„tx_idæ˜¯ä¸€ä¸ª256ä½çš„å“ˆå¸Œå€¼ï¼Œé‚£ä¹ˆå®ƒä¸€å…±æœ‰ $ 2^{256} $ ä¸ªå¯èƒ½å€¼ï¼Œè®¡ç®—å¾—åˆ°å¤§çº¦éœ€è¦ $ 2^{128} $ è¿™ä¸ªæ•°é‡çº§ç¢°æ’æ¦‚ç‡æ‰ä¼šè¾¾åˆ°50%ï¼Œè€Œæ¯”ç‰¹å¸ç½‘ç»œè¿è¡Œåˆ°ç°åœ¨åªäº§ç”Ÿäº†çº¦1,130,074,839ç¬”äº¤æ˜“(æ•°æ®æ¥è‡ªhttps://btc.tokenview.io/cn)ï¼Œè¿™ä¸ªæ•°å­—åªæ˜¯ $ 2^{30} $ æ•°é‡çº§ï¼Œå¸¦å…¥åˆšåˆšçš„å…¬å¼ï¼Œç¢°æ’çš„æ¦‚ç‡æ˜¯$ P_{ç¢°æ’}= 1-e^{-\frac{1}{2^{197}}} \approx 5 \times 10^{-60} $ è¿™ç»å¯¹æ˜¯ä¸€ä¸ªå°æ¦‚ç‡äº‹ä»¶ï¼Œåœ¨æ‰¾åˆ°æ”»ç ´SHA256ç®—æ³•çš„æ–¹æ³•ä¹‹å‰ï¼Œè¿™å°±åƒæ˜¯åœ¨å®‡å®™ä¸­ä¸¤æ¬¡éšæœºæ¡èµ·åŒä¸€ç²’æ²™å­ã€‚</p>
<hr>
<p>ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬å·²ç»å®ç°äº†ä¸€ä¸ªåˆå…·é›å½¢çš„åŒºå—é“¾äº†ï¼è¿™ä¸ªä¸“æ çš„ä¸»è¦å†…å®¹å‘Šä¸€æ®µè½ï¼Œåœ¨åé¢å¯èƒ½ä¼šåŸºäºè¿™ä¸ªåŒºå—é“¾æ·»åŠ ä¸€äº›å¤æ‚ä¸€ç‚¹çš„åŠŸèƒ½(æ¯”å¦‚SPVï¼Œgasè´¹ä¹‹ç±»çš„)ï¼Œæˆ–è€…ä¼šæ›´æ–°ä¸€äº›åŒºå—é“¾å…¶ä»–æ–¹é¢çš„å†…å®¹ã€‚</p>
</div>
    <div class="post__footer">
      
        <span><a class="category" href="/cn/categories/blockchain/">blockchain</a><a class="category" href="/cn/categories/web3/">web3</a></span>


      

      
    </div>

    
  </div>

      </main>
    </div><footer class="footer footer__base">
  <ul class="footer__list">
    <li class="footer__item">
      &copy;
      
        Chang
        2025
      
    </li>
    
      <li class="footer__item">
        <a
          class="link"
          href="/imprint/"
          
          title=""
        >
          imprint
        </a>
      </li>
    
  </ul>
</footer>
  
  <script
    type="text/javascript"
    src="/js/medium-zoom.min.1248fa75275e5ef0cbef27e8c1e27dc507c445ae3a2c7d2ed0be0809555dac64.js"
    integrity="sha256-Ekj6dSdeXvDL7yfoweJ9xQfERa46LH0u0L4ICVVdrGQ="
    crossorigin="anonymous"
  ></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.0/dist/katex.min.css" integrity="sha384-t5CR&#43;zwDAROtph0PXGte6ia8heboACF9R5l/DiY&#43;WZ3P2lxNgvJkQk5n7GPvLMYw" crossorigin="anonymous" /><script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.0/dist/katex.min.js" integrity="sha384-FaFLTlohFghEIZkw6VGwmf9ISTubWAVYW8tG8&#43;w2LAIftJEULZABrF9PPFv&#43;tVkH" crossorigin="anonymous"></script><script
      defer
      src="https://cdn.jsdelivr.net/npm/katex@0.13.0/dist/contrib/auto-render.min.js"
      integrity="sha384-bHBqxz8fokvgoJ/sc17HODNxa42TlaEhB&#43;w8ZJXTc2nZf1VgEaFZeZvT4Mznfz0v"
      crossorigin="anonymous"
      onload="renderMathInElement(document.body);"
    ></script>
      <script async src="https://www.googletagmanager.com/gtag/js?id=G-6W03JJK5LC"></script>
      <script>
        var doNotTrack = false;
        if ( false ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-6W03JJK5LC');
        }
      </script></body>
</html>
